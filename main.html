<!DOCTYPE html>
<!-- saved from url=(0034)https://add-egg-dev.u-w.me/profile -->
<html class="common" lang="ru">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- CSRF Token -->
    <meta name="csrf-token" content="Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S" />

    <title>MAIN</title>

    <!-- Styles -->
    <link href="./assets/style.css" rel="stylesheet" />
    <link href="./assets/custom.css" rel="stylesheet" />
    <style>
        button.audioControl {
            z-index: 9;
            position: absolute;
            width: 100%;
            height: 100%;
        }

        button.audioControl img {
            position: absolute;
            margin: auto;
            left: 0;
            top: 0;
            bottom: 0;
            right: 0;
        }

        .post .progress {
            height: 10px;
            padding: 0;
            position: absolute;
            width: 100%;
            bottom: -10px;
            z-index: 9;
        }

        input[type="search"]::-webkit-search-cancel-button {
            -webkit-appearance: none;
            height: 10px;
            width: 10px;
            background-image: url("data:image/svg+xml,%3Csvg width='10px' height='10px' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cpath d='M 10,10 l 90,90 M 100,10 l -90,90' stroke='white' stroke-width='10' /%3E%3C/svg%3E");
        }
    </style>
</head>

<body class="common__body">
    <div id="app" class="app">
        <div class="app__rotate"><img src="/img/rotate.png" alt="">
            <div class="app__rotate-title">Для более комфортного использования, <br> поверните Ваше устройство
                вертикально</div>
        </div>
        <header class="header"></header>
        <main class="main">
            <div class="feed section _with-control">
                <div class="section__header _only-main">
                    <div class="section__header-main">
                        <h1 class="title changeableTitle" data-default="рекомендованное">рекомендованное</h1>
                    </div>
                </div>
                <div class="post-list">
                    <div>Пусто</div>
                </div>
                <div class="section__title">
                    <h1 class="title replacingTitle">мои звезды</h1>
                </div>
                <div class="post-list">
                    <div class="post">
                        <div class="post__main" id="postId-36" data-id="36" style="margin-bottom: 10px;">
                            <div class="post__audio">
                                <audio class="audio" data-post-id="36" ontimeupdate="updateBar('36', 'post', this)" src="/upload/audio/1623091877_DMX_-_Ruff_Ryders_Anthem_48067249.mp3">
                                </audio>
                                <span class="duration"></span>
                                <button class="audioControl" onclick="togglePlaying('36', 'post', this)"><img src="assets/play_alt.svg"></button>
                                <img class="post__audio-img" src="assets/1629706916_phpohvowo.jpg" alt="">
                                <span class="current-time post__duration"></span>
                            </div>
                            <div class="post__info">
                                <div class="post__header">
                                    <div class="post__title">
                                        <a href="#">
                                            BOGDAN KRAVCHENKO
                                        </a>
                                    </div>
                                    <div class="post__date">11 месяцев назад</div>
                                </div>
                                <div class="post__actions">
                                    <a class="post__action post__action_like " style="cursor: pointer;"><i class="icon icon-heart "></i></a>
                                    <a class="post__action post__action_likes-list popupActivation " data-popup="people" href="">4</a>
                                    <a class="post__action popupActivation _active " href="" data-to-id="36" data-to-type="post" data-popup="record_5" data-type-popup="forComment">
                                        <i class="icon icon-egg _shadowed "></i>
                                    </a>
                                    <a class="post__action post__action_comments-list popupActivation _active " data-to-id="36" data-to-type="post" data-popup="comments" href="">3</a>
                                </div>
                            </div>

                            <div class="post__menu">
                                <a class="post__menu-item popupActivation" href="#" data-popup="post-36-menu">
                                    <i class="icon icon-menu"></i>
                                </a>

                                <form style="margin: 0;" id="deleteFormPost36" class="post__menu-item _delete" action="#" method="POST">
                                    <input type="hidden" name="_token" value="Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S">
                                    <label class="record__multimedia-item">
                                        <span onclick="confirmDeletePost(36)"><i class="icon icon-trash"></i></span>
                                        <input type="hidden" name="post_id" value="36">
                                    </label>
                                </form>

                            </div>
                            <canvas class="progress"></canvas>
                        </div>
                        <div class="post__img">
                            <img src="/assets/1623091914_IMG_20201116_213815.jpg" alt="">
                        </div>
                    </div>

                    <div class="post post_linked">
                        <div class="post__main commentPost" id="commentId-61" data-id="61" style="margin-bottom: 10px;">
                            <div class="post__audio">
                                <audio class="audio" data-post-id="61" ontimeupdate="updateBar('61', 'comment', this)" src="/upload/audio/1652775439_phpq3xygh.webm">
                                </audio>
                                <span class="duration"></span>
                                <button class="audioControl" onclick="togglePlaying('61', 'comment', this)"><img src="assets/play_alt.svg"></button>
                                <img class="post__audio-img" src="assets/1629706916_phpohvowo.jpg" width="64" height="60" alt="">
                                <span class="current-time post__duration"></span>
                            </div>
                            <div class="post__info">
                                <div class="post__header">
                                    <div class="post__title"><a href="/profile/KRAY">KRAY</a></div>
                                    <div class="post__date">3 дня назад</div>
                                </div>
                                <div class="post__actions">
                                    <a class="post__action post__action_like _active " style="cursor: pointer;"><i class="icon icon-heart _shadowed "></i></a>
                                    <a class="post__action post__action_likes-list popupActivation _active " data-popup="people" href="">1</a>
                                </div>
                            </div>
                            <canvas class="progress"></canvas>
                        </div>
                        <input type="hidden" class="notifId" value="">
                    </div>

                    <div class="popup" data-popup="post-61-menu">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item" href="">пожаловаться</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        href="https://add-egg-dev.u-w.me/messenger/forwardList/61">переслать</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        onclick="copyToCliboard(61)">скопировать ссылку</a>
                                    <a class="menu__item popupActivation" style="cursor: pointer;"
                                        data-popup="playlist_61">добавить в плейлист</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="popup" data-popup="playlist_61">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item" href="/playlists/saveToPlaylist/61/8">MediaDRUGS</a>
                                    <a class="menu__item" href="/playlists/saveToPlaylist/61/10">мысли о сайте</a>
                                    <form action="https://add-egg-dev.u-w.me/playlists/createPlaylist" method="post"
                                        class="menu__item">
                                        <input type="hidden" name="_token"
                                            value="Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S">
                                        <input type="hidden" name="post_id" value="61">
                                        <input type="text" name="name" placeholder="создать плэйлист" required>
                                        <button type="submit" class="form__button">создать</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="popup" data-popup="post-36-menu">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item"
                                        href="https://add-egg-dev.u-w.me/profile/promote/post/36">продвигать</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        href="https://add-egg-dev.u-w.me/messenger/forwardList/36">переслать</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        onclick="copyToCliboard(36)">скопировать ссылку</a>
                                    <a class="menu__item popupActivation" style="cursor: pointer;"
                                        data-popup="playlist_36">добавить в плейлист</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="popup" data-popup="playlist_36">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item" href="/playlists/saveToPlaylist/36/8">MediaDRUGS</a>
                                    <a class="menu__item" href="/playlists/saveToPlaylist/36/10">мысли о сайте</a>
                                    <form action="https://add-egg-dev.u-w.me/playlists/createPlaylist" method="post"
                                        class="menu__item">
                                        <input type="hidden" name="_token"
                                            value="Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S">
                                        <input type="hidden" name="post_id" value="36">
                                        <input type="text" name="name" placeholder="создать плэйлист" required>
                                        <button type="submit" class="form__button">создать</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="post">
                        <div class="post__main" id="postId-167" data-id="167" style="margin-bottom: 10px;">
                            <div class="post__audio">
                                <audio class="audio" data-post-id="167" ontimeupdate="updateBar('167', 'post', this)"
                                    src="/upload/audio/1625775340_phpckvjiy.mp3">
                                </audio>
                                <span class="duration"></span>
                                <button class="audioControl" onclick="togglePlaying('167', 'post', this)"><img
                                        src="assets/play_alt.svg"></button>
                                <img class="post__audio-img" src="assets/1629706916_phpohvowo.jpg" alt="">
                                <span class="current-time post__duration"></span>
                            </div>
                            <div class="post__info">
                                <div class="post__header">
                                    <div class="post__title">
                                        <a href="/profile/DANET">
                                            DANET
                                        </a>
                                    </div>
                                    <div class="post__date">10 месяцев назад</div>
                                </div>
                                <div class="post__actions">
                                    <a class="post__action post__action_like " style="cursor: pointer;"><i
                                            class="icon icon-heart "></i></a>
                                    <a class="post__action post__action_likes-list popupActivation " data-popup="people"
                                        href="">1</a>
                                    <a class="post__action popupActivation " href="" data-to-id="167"
                                        data-to-type="post" data-popup="record_5" data-type-popup="forComment">
                                        <i class="icon icon-egg "></i>
                                    </a>
                                    <a class="post__action post__action_comments-list popupActivation " data-to-id="167"
                                        data-to-type="post" data-popup="comments" href="">1</a>
                                </div>
                            </div>

                            <div class="post__menu">
                                <a class="post__menu-item popupActivation" href="" data-popup="post-167-menu">
                                    <i class="icon icon-menu"></i>
                                </a>
                            </div>
                            <canvas class="progress"></canvas>
                        </div>
                    </div>
                    <div class="post post_linked">
                        <div class="post__main commentPost" id="commentId-61" data-id="61" style="margin-bottom: 10px;">
                            <div class="post__audio">
                                <audio class="audio" data-post-id="61" ontimeupdate="updateBar('61', 'comment', this)" src="/upload/audio/1652775439_phpq3xygh.webm">
                                </audio>
                                <span class="duration"></span>
                                <button class="audioControl" onclick="togglePlaying('61', 'comment', this)"><img src="assets/play_alt.svg"></button>
                                <img class="post__audio-img" src="assets/1629706916_phpohvowo.jpg" width="64" height="60" alt="">
                                <span class="current-time post__duration"></span>
                            </div>
                            <div class="post__info">
                                <div class="post__header">
                                    <div class="post__title"><a href="/profile/KRAY">KRAY</a></div>
                                    <div class="post__date">3 дня назад</div>
                                </div>
                                <div class="post__actions">
                                    <a class="post__action post__action_like _active " style="cursor: pointer;"><i class="icon icon-heart _shadowed "></i></a>
                                    <a class="post__action post__action_likes-list popupActivation _active " data-popup="people" href="">1</a>
                                </div>
                            </div>
                            <canvas class="progress"></canvas>
                        </div>
                        <input type="hidden" class="notifId" value="">
                    </div>

                    <div class="popup" data-popup="post-61-menu">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item" href="">пожаловаться</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        href="https://add-egg-dev.u-w.me/messenger/forwardList/61">переслать</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        onclick="copyToCliboard(61)">скопировать ссылку</a>
                                    <a class="menu__item popupActivation" style="cursor: pointer;"
                                        data-popup="playlist_61">добавить в плейлист</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="popup" data-popup="playlist_61">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item" href="/playlists/saveToPlaylist/61/8">MediaDRUGS</a>
                                    <a class="menu__item" href="/playlists/saveToPlaylist/61/10">мысли о сайте</a>
                                    <form action="https://add-egg-dev.u-w.me/playlists/createPlaylist" method="post"
                                        class="menu__item">
                                        <input type="hidden" name="_token"
                                            value="Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S">
                                        <input type="hidden" name="post_id" value="61">
                                        <input type="text" name="name" placeholder="создать плэйлист" required>
                                        <button type="submit" class="form__button">создать</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="popup" data-popup="post-36-menu">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item"
                                        href="https://add-egg-dev.u-w.me/profile/promote/post/36">продвигать</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        href="https://add-egg-dev.u-w.me/messenger/forwardList/36">переслать</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        onclick="copyToCliboard(36)">скопировать ссылку</a>
                                    <a class="menu__item popupActivation" style="cursor: pointer;"
                                        data-popup="playlist_36">добавить в плейлист</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="popup" data-popup="playlist_36">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item" href="/playlists/saveToPlaylist/36/8">MediaDRUGS</a>
                                    <a class="menu__item" href="/playlists/saveToPlaylist/36/10">мысли о сайте</a>
                                    <form action="https://add-egg-dev.u-w.me/playlists/createPlaylist" method="post"
                                        class="menu__item">
                                        <input type="hidden" name="_token"
                                            value="Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S">
                                        <input type="hidden" name="post_id" value="36">
                                        <input type="text" name="name" placeholder="создать плэйлист" required>
                                        <button type="submit" class="form__button">создать</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="post">
                        <div class="post__main" id="postId-167" data-id="167" style="margin-bottom: 10px;">
                            <div class="post__audio">
                                <audio class="audio" data-post-id="167" ontimeupdate="updateBar('167', 'post', this)"
                                    src="/upload/audio/1625775340_phpckvjiy.mp3">
                                </audio>
                                <span class="duration"></span>
                                <button class="audioControl" onclick="togglePlaying('167', 'post', this)"><img
                                        src="assets/play_alt.svg"></button>
                                <img class="post__audio-img" src="assets/1629706916_phpohvowo.jpg" alt="">
                                <span class="current-time post__duration"></span>
                            </div>
                            <div class="post__info">
                                <div class="post__header">
                                    <div class="post__title">
                                        <a href="/profile/DANET">
                                            DANET
                                        </a>
                                    </div>
                                    <div class="post__date">10 месяцев назад</div>
                                </div>
                                <div class="post__actions">
                                    <a class="post__action post__action_like " style="cursor: pointer;"><i
                                            class="icon icon-heart "></i></a>
                                    <a class="post__action post__action_likes-list popupActivation " data-popup="people"
                                        href="">1</a>
                                    <a class="post__action popupActivation " href="" data-to-id="167"
                                        data-to-type="post" data-popup="record_5" data-type-popup="forComment">
                                        <i class="icon icon-egg "></i>
                                    </a>
                                    <a class="post__action post__action_comments-list popupActivation " data-to-id="167"
                                        data-to-type="post" data-popup="comments" href="">1</a>
                                </div>
                            </div>

                            <div class="post__menu">
                                <a class="post__menu-item popupActivation" href="" data-popup="post-167-menu">
                                    <i class="icon icon-menu"></i>
                                </a>
                            </div>
                            <canvas class="progress"></canvas>
                        </div>
                    </div>
                    <div class="post post_linked">
                        <div class="post__main commentPost" id="commentId-61" data-id="61" style="margin-bottom: 10px;">
                            <div class="post__audio">
                                <audio class="audio" data-post-id="61" ontimeupdate="updateBar('61', 'comment', this)" src="/upload/audio/1652775439_phpq3xygh.webm">
                                </audio>
                                <span class="duration"></span>
                                <button class="audioControl" onclick="togglePlaying('61', 'comment', this)"><img src="assets/play_alt.svg"></button>
                                <img class="post__audio-img" src="assets/1629706916_phpohvowo.jpg" width="64" height="60" alt="">
                                <span class="current-time post__duration"></span>
                            </div>
                            <div class="post__info">
                                <div class="post__header">
                                    <div class="post__title"><a href="/profile/KRAY">KRAY</a></div>
                                    <div class="post__date">3 дня назад</div>
                                </div>
                                <div class="post__actions">
                                    <a class="post__action post__action_like _active " style="cursor: pointer;"><i class="icon icon-heart _shadowed "></i></a>
                                    <a class="post__action post__action_likes-list popupActivation _active " data-popup="people" href="">1</a>
                                </div>
                            </div>
                            <canvas class="progress"></canvas>
                        </div>
                        <input type="hidden" class="notifId" value="">
                    </div>

                    <div class="popup" data-popup="post-61-menu">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item" href="">пожаловаться</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        href="https://add-egg-dev.u-w.me/messenger/forwardList/61">переслать</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        onclick="copyToCliboard(61)">скопировать ссылку</a>
                                    <a class="menu__item popupActivation" style="cursor: pointer;"
                                        data-popup="playlist_61">добавить в плейлист</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="popup" data-popup="playlist_61">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item" href="/playlists/saveToPlaylist/61/8">MediaDRUGS</a>
                                    <a class="menu__item" href="/playlists/saveToPlaylist/61/10">мысли о сайте</a>
                                    <form action="https://add-egg-dev.u-w.me/playlists/createPlaylist" method="post"
                                        class="menu__item">
                                        <input type="hidden" name="_token"
                                            value="Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S">
                                        <input type="hidden" name="post_id" value="61">
                                        <input type="text" name="name" placeholder="создать плэйлист" required>
                                        <button type="submit" class="form__button">создать</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="popup" data-popup="post-36-menu">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item"
                                        href="https://add-egg-dev.u-w.me/profile/promote/post/36">продвигать</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        href="https://add-egg-dev.u-w.me/messenger/forwardList/36">переслать</a>
                                    <a class="menu__item" style="cursor: pointer;"
                                        onclick="copyToCliboard(36)">скопировать ссылку</a>
                                    <a class="menu__item popupActivation" style="cursor: pointer;"
                                        data-popup="playlist_36">добавить в плейлист</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="popup" data-popup="playlist_36">
                        <div class="popup__scroll _top">
                            <div class="popup__content _bg">
                                <div class="menu">
                                    <a class="menu__item" href="/playlists/saveToPlaylist/36/8">MediaDRUGS</a>
                                    <a class="menu__item" href="/playlists/saveToPlaylist/36/10">мысли о сайте</a>
                                    <form action="https://add-egg-dev.u-w.me/playlists/createPlaylist" method="post"
                                        class="menu__item">
                                        <input type="hidden" name="_token"
                                            value="Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S">
                                        <input type="hidden" name="post_id" value="36">
                                        <input type="text" name="name" placeholder="создать плэйлист" required>
                                        <button type="submit" class="form__button">создать</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="post">
                        <div class="post__main" id="postId-167" data-id="167" style="margin-bottom: 10px;">
                            <div class="post__audio">
                                <audio class="audio" data-post-id="167" ontimeupdate="updateBar('167', 'post', this)"
                                    src="/upload/audio/1625775340_phpckvjiy.mp3">
                                </audio>
                                <span class="duration"></span>
                                <button class="audioControl" onclick="togglePlaying('167', 'post', this)"><img
                                        src="assets/play_alt.svg"></button>
                                <img class="post__audio-img" src="assets/1629706916_phpohvowo.jpg" alt="">
                                <span class="current-time post__duration"></span>
                            </div>
                            <div class="post__info">
                                <div class="post__header">
                                    <div class="post__title">
                                        <a href="/profile/DANET">
                                            DANET
                                        </a>
                                    </div>
                                    <div class="post__date">10 месяцев назад</div>
                                </div>
                                <div class="post__actions">
                                    <a class="post__action post__action_like " style="cursor: pointer;"><i
                                            class="icon icon-heart "></i></a>
                                    <a class="post__action post__action_likes-list popupActivation " data-popup="people"
                                        href="">1</a>
                                    <a class="post__action popupActivation " href="" data-to-id="167"
                                        data-to-type="post" data-popup="record_5" data-type-popup="forComment">
                                        <i class="icon icon-egg "></i>
                                    </a>
                                    <a class="post__action post__action_comments-list popupActivation " data-to-id="167"
                                        data-to-type="post" data-popup="comments" href="">1</a>
                                </div>
                            </div>

                            <div class="post__menu">
                                <a class="post__menu-item popupActivation" href="" data-popup="post-167-menu">
                                    <i class="icon icon-menu"></i>
                                </a>
                            </div>
                            <canvas class="progress"></canvas>
                        </div>
                    </div>
                    
                </div>
                <!-- Navigation bar -->
                <div class="navigation">
                    <div class="navigation__item _active navigate">
                      <a href="#" class="link-full"></a>
                      <img src="assets/Vector 30.png" alt="">
                      <span>ГЛАВНАЯ</span>
                    </div>
                    <div class="navigation__item navigate">
                      <a href="message.html" class="link-full"></a>
                      <i class="icon icon-mail"></i>
                      <span>СООБЩЕНИЯ</span>
                    </div>
                    <div class="navigation__item navigate">
                      <a href="search.html" class="link-full"></a>
                      <i class="icon icon-search"></i>
                      <span>ПОИСК</span>
                    </div>
                    <div class="navigation__item _new navigate">
                      <a href="notification.html" class="link-full"></a>
                      <i class="icon icon-bell"></i>
                      <span>УВЕДОМЛЕНИЯ</span>
                    </div>
                    <div class="navigation__item  navigate">
                      <a href="profile.html" class="link-full"></a>
                      <i class="icon icon-user"></i>
                      <span>Профиль</span>
                    </div>
                  </div>
            </div>
            <div class="popup" data-popup="people">
                <div class="popup__scroll _bottom">
                    <div class="popup__content _bg">
                        <div class="sorting"></div>
                        <div class="likes-list">
                        </div>
                    </div>
                </div>
            </div>
            <div class="popup" data-popup="comments" data-to-id="" data-to-type="">
                <div class="popup__scroll _bottom">
                    <div class="popup__content _bg">
                        <div class="sorting">
                            <a class="sorting__item _active" href=""><span>дата</span></a>
                            <a class="sorting__item" href=""><i class="icon icon-heart"></i></a>
                            <a class="sorting__item" href=""><i class="icon icon-egg-thick"></i></a>
                        </div>
                        <div class="comments-list">
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="popup" id="passwordError" data-popup="password_error">
                    <div class="popup__scroll">
                        <div class="popup__content">
                            <div class="confirmation notification"
                                style="color: black; height: 34px; line-height: 28px;">введен неверный пароль</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer class="footer"></footer>
        <div class="popup" data-popup="confirmation">
            <div class="popup__scroll">
                <div class="popup__content">
                    <div class="confirmation">
                        <div class="confirmation__main">
                            <div class="confirmation__title">Подтверждение</div>
                            <div class="confirmation__description">заблокировать</div>
                            <div class="confirmation__name">sabina.kravchenko</div>
                        </div>
                        <div class="confirmation__img"><img src="/img/post-mini.png"></div>
                        <div class="confirmation__actions"><a class="confirmation__action" href="">yes</a><a
                                class="confirmation__action" href="">no</a></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup" data-popup="confirmation_2">
            <div class="popup__scroll">
                <div class="popup__content">
                    <div class="confirmation">
                        <div class="confirmation__main">
                            <div class="confirmation__title">Подтверждение</div>
                            <div class="confirmation__description">переслать сообщение для</div>
                            <div class="confirmation__name">sabina.kravchenko</div>
                        </div>
                        <div class="confirmation__img"><img src="/img/post-mini.png"></div>
                        <div class="confirmation__actions"><a class="confirmation__action" href="">yes</a><a
                                class="confirmation__action" href="">no</a></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup" data-popup="confirmation_3">
            <div class="popup__scroll">
                <div class="popup__content">
                    <div class="confirmation">
                        <div class="confirmation__main">
                            <div class="confirmation__title">Подтверждение</div>
                            <div class="confirmation__description">пожаловаться на</div>
                            <div class="confirmation__name">sabina.kravchenko</div>
                        </div>
                        <div class="confirmation__img"><img src="/img/post-mini.png"></div>
                        <div class="confirmation__actions"><a class="confirmation__action" href="">yes</a><a
                                class="confirmation__action" href="">no</a></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup" data-popup="confirmation_4">
            <div class="popup__scroll">
                <div class="popup__content">
                    <div class="confirmation">
                        <div class="confirmation__main">
                            <div class="confirmation__title">Подтверждение</div>
                            <div class="confirmation__description">удалить пост?</div>
                        </div>
                        <div class="confirmation__actions"><a class="confirmation__action" style="cursor: pointer;"
                                id="confirmPostDeleteSubmit">yes</a><a style="cursor: pointer;"
                                class="confirmation__action confirmation4__action-close">no</a></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup" data-popup="record">
            <div class="popup__scroll _bottom">
                <div class="popup__content _bg">
                    <div class="record section">
                        <div class="record__header">
                            <div class="record-play">
                                <div class="record-play__progress"></div><a class="record-play__button" href=""><i
                                        class="icon icon-play_alt"><span class="path1"></span><span
                                            class="path2"></span></i></a><a class="record-play__close" href=""><i
                                        class="icon icon-close"></i></a>
                            </div>
                        </div>
                        <div class="record__picture"><a class="record__picture-close" href=""><i
                                    class="icon icon-close"></i></a><img class="record__picture-img"
                                src="/img/post.png"></div><a class="record__button" href=""></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup" data-popup="record_3">
            <div class="popup__scroll _bottom">
                <div class="popup__content _bg">
                    <div class="record section">
                        <div class="record__header">
                            <div class="record-play">
                                <div class="record-play__progress" style="width:70%"></div><a
                                    class="record-play__button" href=""><i class="icon icon-pause"><span
                                            class="path1"></span><span class="path2"></span><span
                                            class="path3"></span><span class="path4"></span></i></a><a
                                    class="record-play__close" href=""><i class="icon icon-close"></i></a>
                            </div>
                        </div>
                        <div class="record__multimedia"><a class="record__multimedia-item _active" href=""><i
                                    class="icon icon-picture"></i></a><a class="record__multimedia-item" href=""><i
                                    class="icon icon-camera"></i></a></div><a class="record__button _active"
                            href=""></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup" data-popup="record_4">
            <div class="popup__scroll _bottom">
                <div class="popup__content _bg">
                    <div class="record section">
                        <div class="record__header">
                            <div class="record-play">
                                <div class="record-play__progress"></div><a class="record-play__button _active"
                                    href=""><i class="icon icon-play_alt"><span class="path1"></span><span
                                            class="path2"></span></i></a><a class="record-play__close" href=""><i
                                        class="icon icon-close"></i></a>
                            </div>
                        </div>
                        <div class="record__multimedia"><a class="record__multimedia-item" href=""><i
                                    class="icon icon-picture"></i></a><a class="record__multimedia-item _active"
                                href=""><i class="icon icon-camera"></i></a></div><a class="record__button" href=""></a>
                    </div>
                </div>
            </div>
        </div>
        <popups-for-post></popups-for-post>
        <div class="popup" data-popup="record_6">
            <div class="popup__scroll _bottom">
                <div class="popup__content _bg">
                    <div class="record section">
                        <div class="record__header">
                            <div class="record__note">удерживайте для записи</div>
                        </div>
                        <div class="record__multimedia"><a class="record__multimedia-item" href=""><i
                                    class="icon icon-music"></i></a><a class="record__multimedia-item" href=""><i
                                    class="icon icon-microphone"></i></a></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="popup" data-popup="record_7">
            <div class="popup__scroll _bottom">
                <div class="popup__content _bg">
                    <div class="record section">
                        <div class="record__header">
                            <div class="record__note _recording">00:06</div>
                        </div>
                        <div class="record__multimedia"><a class="record__multimedia-item _hidden" href=""><i
                                    class="icon icon-music"></i></a><a class="record__multimedia-item _active"
                                href=""><i class="icon icon-microphone"></i></a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://add-egg-dev.u-w.me/js/jquery.min.js"></script>
    <script src="https://add-egg-dev.u-w.me/js/app.js" defer></script>

    <script type="text/javascript">
        let audioFile = null;
        let postId = null;
        let audioGreeting = null;

        function confirmDeletePost(id) {
            let popupDeletePost = $('.popup[data-popup="confirmation_4"]');
            popupDeletePost[0].classList.add('active');
            postId = id;
        }

        function togglePlaying(postId, type, node) {
            let idPrefix;
            if (type === 'post') {
                idPrefix = '#postId-';
            } else {
                idPrefix = '#commentId-';
            }

            if (document.getElementById('profilePlay') !== null) {
                audioGlobal.pause();
                audioGlobal.currentTime = 0;
                document.getElementById('profilePlay').style.display = 'flex';
                document.getElementById('profilePause').style.display = 'none';
            }
            const $post = node ? $(node).closest('.post') : $(idPrefix + postId);

            if (audioFile) {
                let text = "updateBar('" + postId + "', '" + type + "', this)";
                let currAudio = $(audioFile).attr('ontimeupdate');
                let $audioPost = $(audioFile).closest('.post');
                // if (currAudio !== text) {
                if (!$audioPost.is($post)) {
                    let previousAudio = $(audioFile).attr('data-post-id');
                    let $previousImg = $audioPost.find('button img');
                    let imgSrc = $previousImg.attr('src');

                    if (imgSrc === '/img/pause.svg') {
                        $previousImg.attr('src', 'assets/play_alt.svg');
                    }

                    let canvas = $audioPost.find('.progress')[0];
                    if (canvas) {
                        let context = canvas.getContext('2d');
                        context.clearRect(0, 0, canvas.width, canvas.height);
                    }
                    audioFile.pause();
                    audioFile.currentTime = 0;
                    audioFile = null;
                }
            }
            audioFile = $post.find('.audio')[0];
            let ctrl = $post.find('.audioControl')[0];
            let imgSrc = $post.find('.audioControl img').attr('src');

            let audioEl = audioFile;
            let play = imgSrc === 'assets/play_alt.svg';
            let method;

            if (play) {
                ctrl.innerHTML = `<img src="/img/pause.svg" class="audio__icon audio__icon_pause" data-post-id="${postId}" data-post-type="${type}">`;
                method = 'play'
            } else {
                ctrl.innerHTML = '<img src="assets/play_alt.svg">';
                method = 'pause'
            }

            audioEl[method]();
        }

        function updateBar(postId, type, node) {
            let idPrefix;
            let appWidth = $('#app').width();
            if (type === 'post') {
                idPrefix = '#postId-';
            } else {
                idPrefix = '#commentId-';
            }
            let ctrl, canvas, canvasBlock, currentTimeEl;
            const $post = node ? $(node).closest('.post') : $(idPrefix + postId);

            ctrl = $post.find('.audioControl')[0];
            canvas = $post.find('.progress')[0].getContext('2d');
            canvasBlock = $post.find('.progress')[0];
            currentTimeEl = $post.find('.current-time')[0];


            canvasBlock.width = appWidth;
            let canvasWidth = appWidth;
            let audioEl = audioFile;
            canvas.clearRect(0, 0, canvasWidth, 100)
            canvas.fillStyle = "#fff";
            canvas.fillRect(0, 0, canvasWidth, 100)

            let currentTime = audioEl ? audioEl.currentTime : null;
            let duration = audioEl ? audioEl.duration : null;

            if (currentTime === duration) {
                ctrl.innerHTML = "<img src=\"assets/play_alt.svg\">";
            }

            currentTimeEl.innerHTML = convertElapsedTime(currentTime)

            let percentage = currentTime / duration;
            let progress = (canvasWidth * percentage);

            let gradient = canvas.createLinearGradient(0, 0, 0, 180);
            gradient.addColorStop(0, "#6cd3ff");
            gradient.addColorStop(0.4, "rgba(198,231,248)");
            gradient.addColorStop(0.7, "#fff");

            canvas.fillStyle = gradient
            canvas.fillRect(0, 0, progress, 500)
        }

        function convertElapsedTime(inputSeconds) {
            let seconds = Math.floor(inputSeconds % 60)
            if (seconds < 10) {
                seconds = "0" + seconds
            }
            let minutes = Math.floor(inputSeconds / 60)

            return minutes + ":" + seconds
        }

      // document.addEventListener('ended', e => {
      //     const target = e.target.closest('.audio');
      //     if (!target) {
      //         return;
      //     }
      //     target.currentTime = 0;
      // });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {

            let buttonHide4 = document.querySelector('.confirmation4__action-close');
            buttonHide4.addEventListener('click', function () {
                $('.popup').removeClass('active');
            });

            $('#confirmPostDeleteSubmit').click(function () {
                let deleteForm = $('#deleteFormPost' + postId);
                $(deleteForm).submit();
            });

            $(".record__multimedia-item").click(function () {
                $(".record__multimedia-item").removeClass("_active");
                $(this).addClass("_active");
            });

            $('.record__button').click(function () {
                $(".record__multimedia-item").removeClass("_active");
                // $(this).css("background", "url('/img/logo-shadowed.svg') no-repeat center");
                // $(this).css("background", "url('/img/logo-shadowed.svg') no-repeat center");
                $(this).css("background-size", "contain");
            })

            $(".record__multimedia-item_record").click(function (e) {

                return false;
            });
            $(document).on("click", ".post__action_like", function (e) {
                e.preventDefault();
                let isActive = $(this).hasClass('_active');
                let parentThis = $(this).closest('.post__main')[0];
                let postId = $(parentThis).attr('data-id');
                let isComment = $(parentThis).hasClass('commentPost');
                let isMessage = $(parentThis).hasClass('messagePost');

                let url = "/posts/like/";
                let type = "post";
                let elemIdPrefix = "#postId-";

                if (isComment) {
                    url = "/comments/like/";
                    type = "comment";
                    elemIdPrefix = "#commentId-";
                }

                if (isMessage) {
                    url = "/messenger/like/";
                    type = "message";
                }

                $.ajax({
                    url: url + postId,
                    type: "POST",
                    data: {
                        "_token": "Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S",
                        "type": type,
                    },
                    context: document.body,
                    success: function (data) {
                        let likes = $(elemIdPrefix + postId + ' ' + ':nth-child(2) .post__actions .post__action:nth-child(2)');
                        let likesText = likes.eq(0).text();
                        let likesCount = +likesText;
                        if (isActive) {
                            $(elemIdPrefix + postId + ' ' + ':first-child').removeClass('_active');
                            $(elemIdPrefix + postId + ' ' + ':first-child i').removeClass('_shadowed');
                            $(elemIdPrefix + postId + ' ' + ':nth-child(2)').removeClass('_active');

                            likesCount -= 1;
                        } else {
                            $(elemIdPrefix + postId + ' ' + ':first-child').addClass('_active');
                            $(elemIdPrefix + postId + ' ' + ':first-child i').addClass('_shadowed');
                            $(elemIdPrefix + postId + ' ' + ':nth-child(2)').addClass('_active');
                            likesCount += 1;
                        }
                        $(likes).text(likesCount);
                    }, error: function (response) {
                        console.log('error');
                    }
                });
            });
            $(document).on('click', '.post__action_likes-list', function () {
                let parentThis = $(this).closest('.post__main')[0];
                let postId = $(parentThis).attr('data-id');
                let isComment = $(parentThis).hasClass('commentPost');
                $(".likes-list").empty();

                let url = "/posts/likesList/";
                let type = "post";

                if (isComment) {
                    url = "/comments/likesList/";
                    type = "comment";
                }

                $.ajax({
                    url: url + postId,
                    type: "POST",
                    data: {
                        "_token": "Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S",
                        "type": type,
                    },
                    context: document.body,
                    success: function (data) {
                        for (let i = 0; i < data.length; i++) {
                            $(".likes-list").append(`
                                <div class="post" style="margin-bottom: 40px;">
                                    <div class="post__main"style="margin-bottom: 10px;">
                                        <div class="post__audio">
                                            <span class="duration"></span>
                                            <button class="audioControl"</button>` +
                                (data[i].user.avatar !== null ? '<img class="post__audio-img" src="/upload/avatars/' + data[i].user.avatar + '" alt="">' : "") + `
                                            <span class="current-time post__duration"></span>
                                        </div>
                                            <div class="post__info">
                                                <div class="post__header">
                                                    <div class="post__title"><a href="/profile/${data[i].user.name}">${data[i].user.name}</a></div>
                                            </div>
                                            <div class="post__actions"><a class="post__action" href=""></a>
                                            <a class="post__action" href=""></a>
                                            <a class="post__action" href=""><i class="icon icon-egg"></i></a>
                                            <a class="post__action" href=""></a></div>
                                        </div>
                                    </div>
                                </div>
                            `);
                        }
                    }, error: function (response) {
                        console.log('error');
                    }
                });
            });
            $(document).on('click', '.post__action_comments-list', function () {
                let parentThis = $(this).closest('.post__main')[0];
                let isComment = $(parentThis).hasClass('commentPost');
                let postId = $(parentThis).attr('data-id');
                $(".comments-list").empty();

                let url = "/comments/list/post/";

                if (isComment) {
                    url = "/comments/list/comment/";
                }

                $.ajax({
                    url: url + postId,
                    type: "POST",
                    data: {
                        "_token": "Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S",
                    },
                    context: document.body,
                    success: function (data) {
                        if (data.length === 0) {
                            $(".comments-list").append(`
                                <div>Нет комментариев</div>
                            `);
                        } else {
                            for (let i = 0; i < data.length; i++) {
                                $(".comments-list").append(`
                                    <div class="post" style="margin-bottom: 40px;">
                                        <div class="post__main commentPost" id="commentId-${data[i].id}" data-id="${data[i].id}" style="margin-bottom: 10px;">
                                            <div class="post__audio">
                                                <audio class="audio" data-post-id="${data[i].id}" ontimeupdate="updateBar('${data[i].id}', 'comment', this)"
                                                    src="/upload/audio/${data[i].audio.name}">
                                                </audio>
                                                <span class="duration"></span>
                                                <button class="audioControl" onclick="togglePlaying('${data[i].id}', 'comment', this)"><img src="assets/play_alt.svg"></button>
                                                <img class="post__audio-img" src="` +
                                    (data[i].user.avatar !== null ? '/upload/avatars/' + encodeURIComponent(data[i].user.avatar) + '"'
                                        : 'assets/1629706916_phpohvowo.jpg" width="64" height="60"')
                                    + ` alt="">
                                                <span class="current-time post__duration"></span>
                                            </div>
                                            <div class="post__info">
                                                <div class="post__header">
                                                    <div class="post__title"><a href="/profile/${data[i].user.name}">${data[i].user.name}</a></div>
                                                    <div class="post__date">${data[i].dateToString}</div>
                                                </div>
                                                <div class="post__actions">
                                                    <a class="post__action post__action_like`+ (data[i].isLike ? '_active' : '') + `" href=""><i class="icon icon-heart ` + (data[i].isLike ? '_shadowed' : '') + `"></i></a>
                                                    <a class="post__action post__action_likes-list popupActivation `+ (data[i].isLike ? '_active' : '') + `" data-popup="people" href="">${data[i].noLikes}</a>
                                                    <a class="post__action popupActivation `+ (data[i].isComment ? '_active' : '') + `" href="" data-to-id="${data[i].id}" data-to-type="comment" data-popup="record_5" data-type-popup="forComment"><i class="icon icon-egg ` + (data[i].isComment ? '_shadowed' : '') + `"></i></a>
                                                    <a class="post__action post__action_comments-list popupActivation `+ (data[i].isComment ? '_active' : '') + `" data-to-id="${data[i].id}" data-to-type="comment" data-popup="comments" href="">${data[i].noComments}</a>
                                                </div>`+
                                    (data[i].isMine ?
                                        `<div class="post__menu">
                                                    <a class="post__menu-item popupActivation" href="" data-popup="header-menu"><i class="icon icon-menu"></i></a>

                                                    <form style="margin: 0;" id="deleteFormPost${data[i].id}COMMENT" class="post__menu-item _delete" action="/comments/destroy" method="POST">
                                                        <input type="hidden" name="_token" value="Kzu3W3RUEUefxhsgk8IA1zyAIuHqBTqc9TUjFI7S">
                        <label class="record__multimedia-item">
                            <span onclick="confirmDeletePost('${data[i].id}COMMENT')"><i class="icon icon-trash"></i></span>
                                                            <input type="hidden" name="post_id" value="${data[i].id}">
                                                        </label>
                                                    </form>
                                                </div>`
                                        : '')
                                    + `<canvas class="progress"></canvas>
                                                <input class="comment-time" type="hidden" value="${data[i].created_at}">
                                            </div>
                                        </div>` +
                                    (data[i].photo ?
                                        `<div class="post__img">
                                            <img src="/upload/photos/${data[i].photo}" alt="">
                                        </div>` : '')
                                    +
                                    `</div>
                                `);
                            }
                        }
                        $('.sorting__item').removeClass('_active');
                        $('.sorting__item').removeClass('_asc');
                        $('.sorting__item:first-child').addClass('_active');
                    }, error: function (response) {
                        console.log('error');
                    }
                });
            });

            $(".popup[data-popup='comments']").on("click", ".sorting__item", function (e) {
                e.preventDefault();
                let isActive = $(this).hasClass('_active');
                let sortByQuery, order;
                let comments = $.parseHTML($('.comments-list').html()).filter((el) => {
                    return el.nodeType != Node.TEXT_NODE
                });

                if (!isActive) {
                    //Make it active
                    $('.sorting__item').removeClass('_active');
                    $('.sorting__item').removeClass('_asc');
                    $(this).addClass('_active');
                } else {
                    //Toggle asc/desc
                    if ($(this).hasClass('_asc')) {
                        $(this).removeClass('_asc');
                    } else {
                        $(this).addClass('_asc');
                    }
                }

                order = $(this).hasClass('_asc') ? 'asc' : 'desc';

                if ($(this).is(":first-child")) //Date
                    sortByQuery = '.comment-time';
                else if ($(this).is(":nth-child(2)")) //Likes
                    sortByQuery = '.post__action:nth-child(2)';
                else if ($(this).is(":nth-child(3)")) //Comments
                    sortByQuery = '.post__action:nth-child(4)';

                comments.sort((a, b) => {
                    let numA, numB;

                    if (sortByQuery === '.comment-time') {
                        numA = Date.parse(a.querySelector(sortByQuery).value);
                        numB = Date.parse(b.querySelector(sortByQuery).value);
                    } else {
                        numA = parseInt(a.querySelector(sortByQuery).innerText);
                        numB = parseInt(b.querySelector(sortByQuery).innerText);
                    }

                    if (order === 'asc')
                        return numA - numB;
                    else
                        return numB - numA;
                });

                $('.comments-list').html(comments);
            });

        });

        function copyToCliboard(postId) {
            let copyText = location.origin + '/profile/' + '#' + 'postId-' + postId;
            navigator.clipboard.writeText(copyText);
            alert('ссылка скопирована');
        }
    </script>
</body>

</html>